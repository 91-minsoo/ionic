<!DOCTYPE html>
<html dir="ltr">

<head>
  <meta charset="UTF-8">
  <title>Nav - Routing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="../../../../../css/ionic.bundle.css" rel="stylesheet">
  <link href="../../../../../scripts/testing/styles.css" rel="stylesheet">
  <script src="../../../../../scripts/testing/scripts.js"></script>
  <script src="../../../../../dist/ionic.js"></script>
  <script>
    class PageRoot extends HTMLElement {
      connectedCallback() {
        this.innerHTML = `
          <ion-header>
            <ion-toolbar>
              <ion-title>Root</ion-title>
            </ion-toolbar>
          </ion-header>
          <ion-content padding>
            <h1>Root</h1>
            <div>
              <ion-nav-push component="page-one">
                <ion-button class="next">Go to Page One</ion-button>
              </ion-nav-push>
            </div>
          </ion-content>
        `;
      }
    }
    class PageOne extends HTMLElement {
      connectedCallback() {
        this.innerHTML = `
          <ion-header>
            <ion-toolbar>
              <ion-buttons slot="start">
                <ion-back-button></ion-back-button>
              </ion-buttons>
              <ion-title>Page One</ion-title>
            </ion-toolbar>
          </ion-header>
          <ion-content padding>
            <h1>Page One</h1>
            <ion-nav-push component="page-two">
              <ion-button class="next">Go to Page Two</ion-button>
            </ion-nav-push>
          </ion-content>
        `;
      }
    }
    class PageTwo extends HTMLElement {
      connectedCallback() {
        this.innerHTML = `
          <ion-header>
            <ion-toolbar>
              <ion-buttons slot="start">
                <ion-back-button></ion-back-button>
              </ion-buttons>
              <ion-title>Page Two</ion-title>
            </ion-toolbar>
          </ion-header>
          <ion-content padding>
            <h1>Page Two</h1>
            <ion-button onclick="presentModal()">Create Modal</ion-button>
            <div>
              <ion-nav-push component="page-three">
                <ion-button class="next">Go to Page Three</ion-button>
              </ion-nav-push>
            </div>
          </ion-content>
        `;
      }
    }
    class PageThree extends HTMLElement {
      connectedCallback() {
        this.innerHTML = `
          <ion-header>
            <ion-toolbar>
              <ion-buttons slot="start">
                <ion-back-button></ion-back-button>
              </ion-buttons>
              <ion-title>Page Three</ion-title>
            </ion-toolbar>
          </ion-header>
          <ion-content padding>
            <h1>Page Three</h1>
          </ion-content>
        `;
      }
    }
    customElements.define('page-root', PageRoot);
    customElements.define('page-one', PageOne);
    customElements.define('page-two', PageTwo);
    customElements.define('page-three', PageThree);
    
    
    async function createModal() {
      // initialize controller
      const modalController = document.querySelector('ion-modal-controller');

      await modalController.componentOnReady();

      // create component to open
      const element = document.createElement('div');
      element.innerHTML = `
      <ion-header>
        <ion-toolbar>
          <ion-title>Super Modal</ion-title>
        </ion-toolbar>
      </ion-header>
      <ion-content>
        <h1>Content of doom</h1>
        <div>Here's some more content</div>
        <ion-button onclick="presentModal()">Add another Modal</ion-button>
        <ion-button onclick="presentAlert()">Add an Alert</ion-button>
        <ion-button class="dismiss">Dismiss Modal</ion-button>
      </ion-content>
      `;

      // listen for close event
      const button = element.querySelector('ion-button');
      button.addEventListener('click', () => {
        modalController.dismiss();
      });

      // present the modal
      const modalElement = await modalController.create({
        component: element
      });
      return modalElement;
    }
    
    async function presentAlert() {
      const alertController = document.querySelector('ion-alert-controller');
      await alertController.componentOnReady();

      const alert = await alertController.create({
        header: 'Alert',
        subHeader: 'Subtitle',
        message: 'This is an alert message.',
        buttons: ['OK']
      });
      return await alert.present();
    }


    async function presentModal() {
      const modal = await createModal();
      await modal.present();
    }
  </script>
</head>

<body>
  <ion-app>
    <ion-router>
      <ion-route url="/" component="page-root"></ion-route>
      <ion-route url="/page-one" component="page-one"></ion-route>
      <ion-route url="/page-two" component="page-two"></ion-route>
      <ion-route url="/page-three" component="page-three"></ion-route>
    </ion-router>
    <ion-nav></ion-nav>
    <ion-modal-controller></ion-modal-controller>
    <ion-alert-controller></ion-alert-controller>
  </ion-app>
</body>

</html>
